/*! modi 2.0.1 | github.com/circunspecter/modi */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Modi",[],t):"object"==typeof exports?exports.Modi=t():e.Modi=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=i(o),l=n(2),u=i(l),c=n(3),f=i(c),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];s(this,e),this.config=Object.assign({container:document.body,eventsNamespace:"modal",content:null,template:null,data:Object.assign({},t.data)},t),this.template=new u.default(this.config.template||f.default,this.config.data),a.default.container=this.config.container,this.elements=[],this.references={},this.listeners=[],!1!==n&&this.create(this.config.content)}return r(e,[{key:"show",value:function(e,t){this.setVisible(!0,t,e)}},{key:"hide",value:function(e){this.setVisible(!1,e)}},{key:"setVisible",value:function(e,t,n){if(this.elements.length){var i=!0===e?"show":"hide";if(!0!==t&&this.template.methods[i]){var s,r=[this];"show"===i&&r.unshift(n),(s=this.template.methods)[i].apply(s,r)}else e!==this.isVisible()&&("show"===i&&n&&(this.content=n),this.setFlags(e),this.dispatchEvent(i))}}},{key:"relocate",value:function(){this.isVisible()&&(this.setFlags(),this.dispatchEvent("relocate"))}},{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.elements.length||(this.elements=a.default.appendHtml(this.template.render()),this.elements.forEach(function(t){Object.defineProperty(t,"_Modi",{value:e})}),this.content=t,this.element("close")&&this.addListener("click",function(){e.hide()},this.element("close")),"true"===a.default.data.get(this.element("overlay"),"outsideClose")&&this.addListener("click",function(t){"overlay"===t.target.dataset.element&&e.hide()},this.element("overlay")),this.resizeTimer=null,this.addListener("resize",function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.relocate()},300)},window),this.template.hasEvents()&&this.template.events.forEach(function(t){var n=e.elements.map(function(e){return a.default.getByAttr(t.selector,e)[0]}).filter(function(e){return a.default.isElement(e)})[0];n&&e.addListener(t.type,function(){"instance"===t.dispatcher?n=e.elements[0]:t.dispatcher&&e.element(t.dispatcher)&&(n=e.element(t.dispatcher)),e.dispatchEvent(t.name,{},n)},n)}))}},{key:"remove",value:function(){this.hide(),this.listeners.forEach(function(e){e.element.removeEventListener(e.type,e.listener)}),this.elements.forEach(function(e){a.default.container.removeChild(e)}),this.listeners=[],this.elements=[],this.references={}}},{key:"isVisible",value:function(){return"true"===a.default.data.get(this.element("modal"),"visible")}},{key:"element",value:function(e){var t=this;return this.references[e]||(this.references[e]=this.elements.filter(function(t){return t.dataset.element===e})[0]||this.elements.map(function(n){return t.getSubElement(e,n)})[0]),this.references[e]}},{key:"getSubElement",value:function(e,t){return a.default.getByAttr('[data-element="'+e+'"]',t)[0]}},{key:"setFlags",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isVisible(),n=!1,i=!1;["overlay","modal"].forEach(function(n){a.default.data.set(e.element(n),"visible",t)}),a.default.data.set(a.default.container,"modalVisible",t),this.element("modal")&&(n=window.innerHeight<this.element("modal").offsetHeight,i=parseInt(this.element("modal").dataset.smallWidth||0,10),i=i>0&&window.matchMedia("(max-width: "+i+"px)").matches),["overlay","modal"].forEach(function(t){a.default.data.set(e.element(t),"smallHeightFlag",n),a.default.data.set(e.element(t),"smallWidthFlag",i)})}},{key:"addListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.elements[0];(a.default.isElement(n)||n===window)&&(n.addEventListener(e,t),this.listeners.push({element:n,type:e,listener:t}))}},{key:"dispatchEvent",value:function(e,t,n){var i=this.config.eventsNamespace+":"+e;t=Object.assign({instance:this,overlay:this.element("overlay"),modal:this.element("modal")},t),this.template.listeners[e]&&this.template.listeners[e](t);var s=[[n],this.listeners.filter(function(e){return e.type===i}).map(function(e){return e.element}),[this.elements[0]]].filter(function(e){return e.filter(function(e){return a.default.isElement(e)}).length})[0];s&&s.length&&new Set(s).forEach(function(e){a.default.event.dispatch(e,i,t)})}},{key:"content",get:function(){return this.element("content")?this.element("content").innerHTML:void 0},set:function(e){e&&this.element("content")&&(this.element("content").innerHTML=e)}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={container:document.body,stringToElements:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},appendElements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(this.isElement(t)){var n=Array.from(e),i=document.createDocumentFragment();return Array.from(e).forEach(function(e){i.appendChild(e)}),t.appendChild(i),n}},appendHtml:function(e,t){return this.appendElements(this.stringToElements(e),t)},getByAttr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(this.isElement(t))return t.querySelectorAll(e)},getSiblings:function(e){return this.isElement(e)?Array.from(e.parentNode.children).filter(function(t){return!1===e.isEqualNode(t)}):[]},isElement:function(e){return null!==e&&"object"===(void 0===e?"undefined":i(e))&&e.nodeType===Node.ELEMENT_NODE},get style(){return{parent:this,set:function(e,t,n){this.parent.isElement(e)&&e.style.setProperty(t,n)},remove:function(e,t){this.parent.isElement(e)&&e.style.removeProperty(t)}}},get event(){return{parent:this,dispatch:function(e,t,n){this.parent.isElement(e)&&e.dispatchEvent(new CustomEvent(t,{detail:n}))}}},get data(){return{parent:this,get:function(e,t){if(this.parent.isElement(e))return e.dataset[t]},set:function(e,t,n){this.parent.isElement(e)&&(e.dataset[t]=n)}}}},e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this.html=t.html||"",this.data=Object.assign({},t.data,n),this.events=t.events||{},this.listeners=t.listeners||{},this.methods=t.methods||{}}return s(e,[{key:"hasEvents",value:function(){return this.events.constructor===[].constructor&&this.events.length}},{key:"render",value:function(){return this.build(this.html,this.data)}},{key:"build",value:function(e,t){return e.replace(/{([^{}]+)}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={html:'\n  <div class="{class}" data-element="overlay" data-visible="false" data-outside-close="{outsideClose}">\n    <div data-element="modal" data-small-width="500">\n      <span data-element="close">Ã—</span>\n      <div data-element="content"></div>\n    </div>\n  </div>\n  ',data:{class:"modi",outsideClose:!0}},e.exports=t.default}])});
//# sourceMappingURL=modi.min.js.map